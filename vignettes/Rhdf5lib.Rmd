---
title: "Linking to Rhdf5lib"
author:
- name: Mike L. Smith
  affiliation: de.NBI & EMBL Heidelberg
package: Rhdf5lib
output:
  BiocStyle::html_document2
vignette: |
  %\VignetteIndexEntry{Linking to Rhdf5lib}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Usage

There is an example package,
[`usingRhdf5lib`](https://github.com/grimbough/usingRhdf5lib), that
demonstrates how packages should link to `Rhdf5lib`.

## Link to the library

To link successfully to the hdf5 library included in `r Biocpkg("Rhdf5lib")`
a package must include *both* a `src/Makevars.win` *and*
`src/Makevars` file.  **Note**: the contents of `src/Makevars.win` and
`src/Makevars` are almost identical, but not quite. Be careful of the
differences.

Create a `src/Makevars.win` file with the following lines

```{bash, eval = FALSE}
RHDF5_LIBS=$(shell echo 'Rhdf5lib::pkgconfig("PKG_CXX_LIBS")'|\
    "${R_HOME}/bin/R" --vanilla --slave)
PKG_LIBS=$(RHDF5_LIBS)
```

and a `src/Makevars` file with the following lines

```{bash, eval = FALSE}
RHDF5_LIBS=`echo 'Rhdf5lib::pkgconfig("PKG_CXX_LIBS")'|\
    "${R_HOME}/bin/R" --vanilla --slave`
PKG_LIBS=$(RHDF5_LIBS)
```

The statement for each platfrom modifies the `$PKG_LIBS` variable. If
your package needs to add to the `$PKG_LIBS` variable, do so by adding
to the `PKG_LIBS=$(RHDF5_LIBS)` line, e.g.,

```{bash, eval = FALSE}
PKG_LIBS=$(RHDF5_LIBS) -L/path/to/foolib -lfoo
```

# Session info {.unnumbered}

```{r sessionInfo, echo=FALSE}
sessionInfo()
```
